# ============================================================================
# ContraVento - PRODUCTION Environment Variables
# ============================================================================
# Copy to .env.prod and customize for your production server
# Usage: docker-compose -f docker-compose.yml -f docker-compose.prod.yml --env-file .env.prod up -d
#
# ⚠️  CRITICAL SECURITY REQUIREMENTS:
#   - Use maximum-strength passwords (min 64 chars recommended)
#   - Never commit this file to version control
#   - Store securely (e.g., AWS Secrets Manager, HashiCorp Vault)
#   - Rotate secrets regularly (every 90 days minimum)
#   - Use different secrets than dev/staging
#   - Enable MFA for all admin access
# ============================================================================

# =============================================================================
# ENVIRONMENT
# =============================================================================
APP_ENV=production
APP_NAME=ContraVento
DEBUG=false

# =============================================================================
# DATABASE - PostgreSQL (Production)
# =============================================================================
POSTGRES_DB=contravento_prod
POSTGRES_USER=contravento_prod
# ⚠️  CRITICAL: Use maximum-strength password (min 64 chars)
# Generate: openssl rand -base64 64 | tr -d '\n'
POSTGRES_PASSWORD=CHANGE_ME_MAXIMUM_STRENGTH_PASSWORD_PRODUCTION_MIN_64_CHARS_ALPHANUMERIC_SYMBOLS
POSTGRES_PORT=5432

# Backend connection (internal network)
DATABASE_URL=postgresql+asyncpg://contravento_prod:CHANGE_ME_MAXIMUM_STRENGTH_PASSWORD_PRODUCTION_MIN_64_CHARS_ALPHANUMERIC_SYMBOLS@postgres:5432/contravento_prod

# =============================================================================
# REDIS - Cache (Production)
# =============================================================================
# ⚠️  CRITICAL: Use maximum-strength password
# Generate: openssl rand -base64 64 | tr -d '\n'
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_PRODUCTION_MIN_64_CHARS
REDIS_PORT=6379
REDIS_URL=redis://:CHANGE_ME_REDIS_PASSWORD_PRODUCTION_MIN_64_CHARS@redis:6379/0

# =============================================================================
# SECURITY - JWT (Production - Maximum Security)
# =============================================================================
# ⚠️  CRITICAL: Use unique maximum-strength key
# Generate: python -c "import secrets; print(secrets.token_urlsafe(96))"
# NEVER reuse keys from dev/staging
# Rotate every 90 days minimum
SECRET_KEY=CHANGE_ME_GENERATE_UNIQUE_MAXIMUM_STRENGTH_SECRET_KEY_MIN_96_CHARS_PRODUCTION

ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=30
BCRYPT_ROUNDS=14

# =============================================================================
# EMAIL - Production SMTP
# =============================================================================
# Option 1: SendGrid (recommended for production)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
# ⚠️  CRITICAL: Use production API key with send restrictions
SMTP_PASSWORD=CHANGE_ME_SENDGRID_PRODUCTION_API_KEY
SMTP_FROM=noreply@contravento.com
SMTP_TLS=true

# Option 2: AWS SES (high deliverability)
# SMTP_HOST=email-smtp.us-east-1.amazonaws.com
# SMTP_PORT=587
# SMTP_USER=CHANGE_ME_AWS_SMTP_USERNAME
# SMTP_PASSWORD=CHANGE_ME_AWS_SMTP_PASSWORD
# SMTP_FROM=noreply@contravento.com
# SMTP_TLS=true

# Option 3: Postmark (transactional email specialist)
# SMTP_HOST=smtp.postmarkapp.com
# SMTP_PORT=587
# SMTP_USER=CHANGE_ME_POSTMARK_SERVER_TOKEN
# SMTP_PASSWORD=CHANGE_ME_POSTMARK_SERVER_TOKEN
# SMTP_FROM=noreply@contravento.com
# SMTP_TLS=true

# =============================================================================
# CORS - Production Domains ONLY
# =============================================================================
# ⚠️  CRITICAL: NEVER use "*" or localhost in production
# Only list your actual production domains
CORS_ORIGINS=https://contravento.com,https://www.contravento.com,https://api.contravento.com

# =============================================================================
# FILE STORAGE (Production)
# =============================================================================
# Consider using S3, Google Cloud Storage, or Azure Blob instead of local storage
STORAGE_PATH=/app/storage
UPLOAD_MAX_SIZE_MB=10

# Alternative: AWS S3
# AWS_ACCESS_KEY_ID=CHANGE_ME_AWS_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=CHANGE_ME_AWS_SECRET_KEY
# AWS_S3_BUCKET=contravento-production-storage
# AWS_S3_REGION=us-east-1

# =============================================================================
# LOGGING (Production)
# =============================================================================
LOG_LEVEL=WARNING
LOG_FORMAT=json

# Log Aggregation (optional but recommended)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# DATADOG_API_KEY=CHANGE_ME_DATADOG_API_KEY

# =============================================================================
# RATE LIMITING (Production - Strict)
# =============================================================================
LOGIN_MAX_ATTEMPTS=3
LOGIN_LOCKOUT_MINUTES=30
VERIFICATION_EMAIL_MAX_PER_HOUR=2

# =============================================================================
# MONITORING (Production)
# =============================================================================
GRAFANA_ADMIN_USER=admin
# ⚠️  CRITICAL: Use strong password + enable MFA
# Generate: openssl rand -base64 32
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD_PRODUCTION_MIN_32_CHARS

# =============================================================================
# PGADMIN (Production - Optional, disable in production if not needed)
# =============================================================================
# ⚠️  WARNING: pgAdmin should NOT be exposed in production
# Only use internally with strong authentication
PGADMIN_EMAIL=admin@contravento.com
# ⚠️  CRITICAL: Use strong password + restrict network access
# Generate: openssl rand -base64 32
PGADMIN_PASSWORD=CHANGE_ME_PGADMIN_PASSWORD_PRODUCTION_MIN_32_CHARS

# =============================================================================
# TRAVEL DIARY - Photo Settings
# =============================================================================
MAX_PHOTOS_PER_TRIP=20
MAX_TAGS_PER_TRIP=10
PHOTO_QUALITY_OPTIMIZED=85
PHOTO_MAX_WIDTH=1200
PHOTO_THUMB_SIZE=200

# =============================================================================
# GEOCODING (Optional)
# =============================================================================
GOOGLE_PLACES_API_KEY=CHANGE_ME_GOOGLE_PLACES_API_KEY
GEOCODING_ENABLED=false

# =============================================================================
# BACKUPS
# =============================================================================
# Configure automated backups to external storage
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=contravento-backups-production
BACKUP_ENCRYPTION_KEY=CHANGE_ME_BACKUP_ENCRYPTION_KEY_MIN_64_CHARS

# =============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# =============================================================================
# Before going live, verify ALL items:
#
# SECURITY:
# [ ] All passwords are maximum-strength (min 64 chars)
# [ ] SECRET_KEY is unique (different from dev/staging)
# [ ] All secrets stored in secure vault (not in .env file)
# [ ] MFA enabled for all admin accounts
# [ ] SSL/TLS certificates installed and auto-renewing
# [ ] CORS restricted to production domains only
# [ ] DEBUG=false
# [ ] Firewall configured (only ports 80, 443 exposed)
#
# DATABASE:
# [ ] PostgreSQL with production-grade settings
# [ ] Automated backups configured and tested
# [ ] Backup restoration tested
# [ ] Connection pooling configured
# [ ] Database monitoring enabled
#
# MONITORING:
# [ ] Prometheus + Grafana configured
# [ ] Alerts configured (email, Slack, PagerDuty)
# [ ] Uptime monitoring (UptimeRobot, Pingdom)
# [ ] Log aggregation (Sentry, Datadog, ELK)
# [ ] Performance monitoring (APM)
#
# EMAIL:
# [ ] Production SMTP tested
# [ ] SPF, DKIM, DMARC records configured
# [ ] Email deliverability tested
# [ ] Bounce handling configured
#
# PERFORMANCE:
# [ ] Redis caching enabled
# [ ] CDN configured for static assets
# [ ] Image optimization enabled
# [ ] Database indexes optimized
# [ ] Load testing completed
#
# COMPLIANCE:
# [ ] Privacy policy published
# [ ] Terms of service published
# [ ] GDPR compliance verified (if applicable)
# [ ] Data retention policy defined
# [ ] Cookie consent implemented
#
# OPERATIONS:
# [ ] Deployment runbook documented
# [ ] Rollback procedure tested
# [ ] Incident response plan defined
# [ ] On-call rotation established
# [ ] Post-mortem process defined
#
# ⚠️  DO NOT deploy to production until ALL items are checked!
# =============================================================================
