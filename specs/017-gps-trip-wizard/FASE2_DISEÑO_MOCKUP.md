# ğŸ¨ Fase 2: DiseÃ±o Visual - Mapa en Paso 1

## ğŸ“Š Comparativa: Antes vs DespuÃ©s

### ANTES (Estado Actual - 5 Pasos)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Paso 1: Upload GPX                                  â”‚
â”‚ â”œâ”€ Drag & Drop                                      â”‚
â”‚ â”œâ”€ TÃ­tulo Sugerido                                  â”‚
â”‚ â””â”€ TelemetrÃ­a (distancia, desnivel, altitudes)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 2: Detalles del Viaje                         â”‚
â”‚ â””â”€ Formulario (tÃ­tulo, descripciÃ³n, fechas)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 3: Resumen de Ruta  â† ESTE PASO SE ELIMINA    â”‚
â”‚ â”œâ”€ TelemetrÃ­a (repetida)                           â”‚
â”‚ â””â”€ Mapa Preview (no interactivo)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 4: POIs                                        â”‚
â”‚ â””â”€ Mapa Interactivo + AÃ±adir POIs                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 5: Review & Publish                           â”‚
â”‚ â””â”€ Resumen Final + Publicar                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### DESPUÃ‰S (Propuesta Fase 2 - 4 Pasos)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Paso 1: Upload GPX + AnÃ¡lisis + MAPA âœ¨ NUEVO      â”‚
â”‚ â”œâ”€ Drag & Drop                                      â”‚
â”‚ â”œâ”€ TÃ­tulo Sugerido                                  â”‚
â”‚ â”œâ”€ TelemetrÃ­a (distancia, desnivel, altitudes)     â”‚
â”‚ â””â”€ MAPA PREVIEW (visualizaciÃ³n inmediata) â† AQUÃ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 2: Detalles del Viaje                         â”‚
â”‚ â””â”€ Formulario (tÃ­tulo, descripciÃ³n, fechas)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 3: POIs (antes era Paso 4)                    â”‚
â”‚ â””â”€ Mapa Interactivo + AÃ±adir POIs                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 4: Review & Publish (antes era Paso 5)        â”‚
â”‚ â””â”€ Resumen Final + Publicar                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ–¼ï¸ Mockup Detallado: Nuevo Paso 1

### Layout Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CREAR VIAJE CON GPX                          â”‚
â”‚                                                                   â”‚
â”‚  Progreso: [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0%                                    â”‚
â”‚                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PASO 1: SUBE TU ARCHIVO GPX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  Selecciona un archivo GPX de tu recorrido en bicicleta.  â”‚  â”‚
â”‚  â”‚  Lo analizaremos automÃ¡ticamente para obtener distancia,  â”‚  â”‚
â”‚  â”‚  elevaciÃ³n y dificultad.                                  â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ“  Macha_Cicloturista_Castillos...gpx  [X]       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚      2.3 MB                                         â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ TÃTULO SUGERIDO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚         Macha Cicloturista Castillos De Ayora             â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  PodrÃ¡s editarlo en el siguiente paso                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ INFORMACIÃ“N DEL RECORRIDO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  DISTANCIA                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚  â”‚
â”‚  â”‚  â”‚ Distancia Total: 45.2 km     â”‚                         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  DESNIVEL                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚  â”‚
â”‚  â”‚  â”‚ Positivo (+)   â”‚  â”‚ Negativo (-)   â”‚                  â”‚  â”‚
â”‚  â”‚  â”‚ 1,250 m        â”‚  â”‚ 1,100 m        â”‚                  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  ALTITUDES                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚  â”‚
â”‚  â”‚  â”‚ MÃ¡xima         â”‚  â”‚ MÃ­nima         â”‚                  â”‚  â”‚
â”‚  â”‚  â”‚ 1,850 m        â”‚  â”‚ 450 m          â”‚                  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  DIFICULTAD                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚  â”‚
â”‚  â”‚  â”‚ Nivel: DifÃ­cil ğŸ”´            â”‚                         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ VISTA PREVIA DEL MAPA âœ¨ NUEVO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                    ğŸ—ºï¸ MAPA                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â”‚ â—â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â— â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â”‚   \  /  \  /  \  /      â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â”‚    â—    â—    â—          â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â”‚      \  /  \            â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â”‚       â—    â—            â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â”‚         \               â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â”‚          â—  (ruta)      â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  [âˆ’] [+]  Zoom: 12  ğŸ”                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â„¹ï¸ Vista preliminar de tu recorrido. PodrÃ¡s        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚     aÃ±adir puntos de interÃ©s en el Paso 3.          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  â€¢ Mapa NO interactivo (solo visualizaciÃ³n)               â”‚  â”‚
â”‚  â”‚  â€¢ Muestra la ruta completa con zoom automÃ¡tico           â”‚  â”‚
â”‚  â”‚  â€¢ Tiles de OpenStreetMap                                 â”‚  â”‚
â”‚  â”‚  â€¢ Skeleton loader durante carga (~500ms)                 â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  [â† Cancelar]                           [Siguiente â†’]     â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Especificaciones TÃ©cnicas

### Estructura de Componentes

```typescript
<Step1Upload>
  {/* Existing components */}
  <GPXWizardUploader />
  <SuggestedTitleCard />
  <TelemetrySkeleton />  {/* if loading */}

  {/* Telemetry Display */}
  <MetricGroup title="Distancia">
    <MetricCard label="Distancia Total" value="45.2 km" />
  </MetricGroup>

  <MetricGroup title="Desnivel">
    <MetricCard label="Positivo (+)" value="1,250 m" />
    <MetricCard label="Negativo (-)" value="1,100 m" />
  </MetricGroup>

  {/* ... more metrics ... */}

  {/* NEW: Map Preview Section */}
  <MapPreviewCard>
    <h3>Vista Previa del Mapa</h3>
    <MapContainer
      center={centerCoordinates}
      zoom={autoCalculatedZoom}
      interactive={false}  {/* KEY: No pan/zoom for user */}
      scrollWheelZoom={false}
      dragging={false}
      touchZoom={false}
      doubleClickZoom={false}
    >
      <TileLayer url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png" />
      <Polyline
        positions={trackpoints}
        color="#dc2626"  {/* Red route */}
        weight={4}
      />
    </MapContainer>
    <p className="map-preview-hint">
      â„¹ï¸ Vista preliminar de tu recorrido. PodrÃ¡s aÃ±adir puntos de
      interÃ©s en el Paso 3.
    </p>
  </MapPreviewCard>
</Step1Upload>
```

### CSS Classes Nuevas

```css
/* Map Preview Card */
.step1-upload__map-preview {
  background-color: #ffffff;
  border: 2px solid #e2e8f0;
  border-radius: 12px;
  padding: 1.5rem;
  margin-top: 1.5rem;
}

.step1-upload__map-preview-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: #1a202c;
  margin: 0 0 1rem 0;
  text-align: center;
}

.step1-upload__map-container {
  width: 100%;
  height: 400px;  /* Desktop */
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid #cbd5e0;
}

.step1-upload__map-hint {
  margin-top: 1rem;
  padding: 0.75rem;
  background-color: #eef2ff;
  border-left: 4px solid #667eea;
  border-radius: 6px;
  font-size: 0.875rem;
  color: #4a5568;
  line-height: 1.5;
}

/* Responsive: Mobile */
@media (max-width: 768px) {
  .step1-upload__map-container {
    height: 300px;  /* Smaller on mobile */
  }
}

/* Loading State */
.step1-upload__map-skeleton {
  width: 100%;
  height: 400px;
  background: linear-gradient(
    90deg,
    #f0f0f0 25%,
    #e0e0e0 50%,
    #f0f0f0 75%
  );
  background-size: 200% 100%;
  animation: loading 1.5s ease-in-out infinite;
  border-radius: 8px;
}
```

---

## ğŸ¯ CaracterÃ­sticas del Mapa Preview

### Interactividad: NO (Solo VisualizaciÃ³n)

| CaracterÃ­stica | Paso 1 (Preview) | Paso 3 (POIs) |
|---------------|------------------|---------------|
| **Pan (arrastrar)** | âŒ No | âœ… SÃ­ |
| **Zoom (rueda/pinch)** | âŒ No | âœ… SÃ­ |
| **Click en mapa** | âŒ No | âœ… SÃ­ (aÃ±adir POI) |
| **Drag markers** | âŒ No | âœ… SÃ­ |
| **Visualizar ruta** | âœ… SÃ­ | âœ… SÃ­ |
| **Auto-fit bounds** | âœ… SÃ­ | âœ… SÃ­ |

**RazÃ³n**: En Paso 1 solo queremos que el usuario **vea** la ruta para confirmar que el GPX es correcto. La interacciÃ³n completa viene en Paso 3 (POIs).

### Zoom AutomÃ¡tico

```typescript
// Calculate bounds from trackpoints
const bounds = L.latLngBounds(
  trackpoints.map(tp => [tp.latitude, tp.longitude])
);

// Auto-fit with padding
map.fitBounds(bounds, {
  padding: [50, 50],  // 50px padding on all sides
  maxZoom: 13,        // Don't zoom too close
  animate: true,
  duration: 0.5
});
```

### Performance

- **Trackpoints simplificados**: Usa los mismos ~200-500 puntos del backend (RDP algorithm)
- **Tiles cacheadas**: OpenStreetMap con cache del navegador
- **Skeleton loader**: Muestra placeholder durante carga (~500ms)
- **Lazy rendering**: El mapa se renderiza solo cuando `telemetry` estÃ¡ disponible

---

## ğŸ”„ Flujo de Usuario (Paso 1)

```
1. Usuario arrastra archivo GPX
   â†“
2. Backend analiza archivo (2-10s tÃ­pico)
   â†“
3. Se muestra:
   â”œâ”€ TÃ­tulo Sugerido âœ…
   â”œâ”€ TelemetrÃ­a Completa âœ…
   â””â”€ MAPA PREVIEW âœ¨ NUEVO
   â†“
4. Usuario verifica visualmente:
   â€¢ "Â¿Es la ruta correcta?"
   â€¢ "Â¿Los datos se ven bien?"
   â€¢ "Â¿El tÃ­tulo tiene sentido?"
   â†“
5. Hace clic en "Siguiente" â†’ Paso 2
```

---

## ğŸ’¡ Ventajas UX

### âœ… Pros

1. **ValidaciÃ³n Visual Inmediata**
   - Usuario confirma que subiÃ³ el GPX correcto al ver el mapa
   - Detecta errores (ruta equivocada) antes de rellenar formulario

2. **Reduce Pasos del Wizard**
   - De 5 pasos â†’ 4 pasos (20% menos)
   - Elimina redundancia (telemetrÃ­a repetida en Paso 3)

3. **Menor Carga Cognitiva**
   - Todo el anÃ¡lisis visual en un solo paso
   - Usuario no tiene que "recordar" cÃ³mo era la ruta

4. **Feedback Inmediato**
   - "Â¡Wow, mi ruta se ve genial!"
   - Aumenta confianza en el sistema

### âš ï¸ Consideraciones

1. **Scroll Vertical MÃ¡s Largo**
   - SoluciÃ³n: DiseÃ±o colapsable opcional (acordeÃ³n)
   - Orden: Mapa al final, despuÃ©s de mÃ©tricas

2. **Carga Perceptual**
   - SoluciÃ³n: Skeleton loader para mapa
   - AnimaciÃ³n de entrada suave (slideIn)

3. **Datos MÃ³viles**
   - SoluciÃ³n: Tiles de OpenStreetMap son ligeras
   - ~50-100KB para vista tÃ­pica

---

## ğŸ†š Alternativas Consideradas

### OpciÃ³n A: Mapa Grande (Propuesta Actual)
```
[Uploader]
[TÃ­tulo]
[TelemetrÃ­a]
[MAPA: 400px altura] â† PROPUESTA
```
**Pros**: Mapa muy visible, validaciÃ³n clara
**Contras**: Scroll largo

### OpciÃ³n B: Mapa PequeÃ±o (Thumbnail)
```
[Uploader]
[TÃ­tulo]
[TelemetrÃ­a + MAPA: 200px al lado]
```
**Pros**: Compacto
**Contras**: Mapa demasiado pequeÃ±o, difÃ­cil de validar

### OpciÃ³n C: Mapa Colapsable (Click para expandir)
```
[Uploader]
[TÃ­tulo]
[TelemetrÃ­a]
[â–¶ Ver Mapa Preview] â† Click para expandir
```
**Pros**: Usuario controla cuÃ¡ndo ver
**Contras**: Paso extra, menos discoverability

### ğŸ¯ RecomendaciÃ³n: OpciÃ³n A (Mapa Grande)

**RazÃ³n**: El objetivo de Fase 2 es dar validaciÃ³n visual **inmediata**. Un mapa colapsado o pequeÃ±o derrota el propÃ³sito.

---

## ğŸ“± Responsive Design

### Desktop (â‰¥1024px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [TelemetrÃ­a en 2 columnas]              â”‚
â”‚                                          â”‚
â”‚ [Mapa: 100% ancho Ã— 400px alto]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tablet (768px - 1023px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [TelemetrÃ­a en 1 columna]     â”‚
â”‚                                â”‚
â”‚ [Mapa: 100% Ã— 350px]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile (<768px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [TelemetrÃ­a stack]  â”‚
â”‚                      â”‚
â”‚ [Mapa: 100% Ã— 300px]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Plan de ImplementaciÃ³n

Si apruebas este diseÃ±o, el plan serÃ­a:

### Fase 2A: Frontend (6-8 horas)
1. **T1**: Crear componente MapPreview (~2h)
   - Leaflet.js con interactividad deshabilitada
   - Auto-fit bounds
   - Skeleton loader

2. **T2**: Integrar en Step1Upload (~2h)
   - AÃ±adir MapPreview despuÃ©s de telemetrÃ­a
   - Pasar trackpoints desde telemetry
   - Manejar estado de carga

3. **T3**: CSS Responsive (~1h)
   - Estilos para map-preview-card
   - Breakpoints mÃ³vil/tablet/desktop
   - Hint text styling

4. **T4**: Eliminar Paso 3 actual (~1h)
   - Remover Step3Map component (obsoleto)
   - Ajustar numeraciÃ³n de pasos en wizard
   - Actualizar progress bar (4 pasos en lugar de 5)

5. **T5**: Testing (~2h)
   - Verificar en diferentes tamaÃ±os de pantalla
   - Probar con archivos grandes (performance)
   - Validar que mapa no es interactivo

### Fase 2B: DocumentaciÃ³n (1-2 horas)
6. **T6**: Actualizar docs
   - Customer journey (custormer_jorney_gpx.md)
   - Especificaciones tÃ©cnicas

---

## â“ Preguntas para DecisiÃ³n

Antes de implementar, necesito tu feedback en:

1. **Â¿Te gusta el diseÃ±o propuesto?** (Mapa grande, no colapsable)
2. **Â¿Altura del mapa OK?** (400px desktop / 300px mÃ³vil)
3. **Â¿Texto del hint correcto?** ("Vista preliminar... podrÃ¡s aÃ±adir POIs en Paso 3")
4. **Â¿AlgÃºn ajuste visual que prefieras?**

---

## ğŸ“Š Resumen Ejecutivo

| Aspecto | Valor |
|---------|-------|
| **ReducciÃ³n de pasos** | 5 â†’ 4 (20% menos) |
| **Nuevo contenido Paso 1** | Mapa preview (no interactivo) |
| **Paso eliminado** | Paso 3 actual (Resumen de Ruta) |
| **Beneficio principal** | ValidaciÃ³n visual inmediata |
| **Esfuerzo estimado** | 8-10 horas |
| **Riesgo** | ğŸŸ¢ Bajo (cambio aislado) |

Â¿QuÃ© te parece? Â¿Aprobamos este diseÃ±o para implementar?

---

## âœ… IMPLEMENTACIÃ“N FINAL (OpciÃ³n C - Implementada 2026-02-02)

### DecisiÃ³n del Usuario

El usuario revisÃ³ las 3 opciones propuestas y seleccionÃ³ **OpciÃ³n C**:

```
OpciÃ³n C: TelemetrÃ­a SOLO en Review (Step 4)
â”œâ”€ Paso 1: Upload + TÃ­tulo Sugerido + MAPA Preview âœ…
â”‚  â””â”€ Sin telemetrÃ­a numÃ©rica (solo mapa)
â”œâ”€ Paso 2: Detalles del Viaje âœ…
â”œâ”€ Paso 3: POIs (renumerado desde Paso 4) âœ…
â””â”€ Paso 4: Review & Publish con TELEMETRÃA COMPLETA âœ…
   â””â”€ AquÃ­ se muestra toda la telemetrÃ­a (distancia, desnivel, altitudes, dificultad)
```

### Cambios Implementados

#### Frontend

1. **Step1Upload.tsx** âœ…
   - âŒ Removida telemetrÃ­a (MetricGroup/MetricCard)
   - âœ… AÃ±adido MapPreview component
   - âœ… Mantiene tÃ­tulo sugerido
   - CSS actualizado (`.step1-upload__preview` en lugar de `.step1-upload__telemetry`)

2. **MapPreview.tsx** âœ… (NUEVO)
   - Componente de mapa estÃ¡tico (no interactivo)
   - Leaflet.js con interacciones deshabilitadas:
     - `dragging: false`
     - `touchZoom: false`
     - `scrollWheelZoom: false`
     - `zoomControl: false`
   - Altura: 400px (desktop), 300px (tablet), 250px (mÃ³vil)
   - Ruta trazada en naranja (#d35400)
   - Auto-fit bounds con padding de 20px

3. **MapPreview.css** âœ… (NUEVO)
   - Responsive design (768px, 480px breakpoints)
   - Dark mode support
   - Print styles

4. **GPXWizard.tsx** âœ…
   - âŒ Eliminado Step3Map (Resumen de Ruta)
   - âœ… Renumerado pasos: 5 â†’ 4
   - âœ… Step3POIs ahora es currentStep === 2
   - âœ… Step4Review ahora es currentStep === 3
   - âœ… Progress bar actualizado para 4 pasos

5. **useGPXWizard.ts** âœ…
   - `TOTAL_STEPS` cambiado de 5 a 4
   - Comentarios actualizados

6. **Step4Review.tsx** âœ…
   - âœ… AÃ±adida telemetrÃ­a completa con MetricGroup/MetricCard
   - Secciones:
     1. Detalles del Viaje
     2. Archivo GPX
     3. **TelemetrÃ­a del Recorrido** (NUEVO)
        - Grupo Distancia (variant primary, size large)
        - Grupo Desnivel (variant success/default)
        - Grupo Altitudes
        - Grupo Dificultad (variant segÃºn nivel)
        - Mensaje "no elevation" si aplica
     4. Puntos de InterÃ©s (si hay POIs)

7. **Step3Review.css** âœ…
   - AÃ±adidos estilos para `.step3-review__no-elevation`

#### Tests

1. **GPXWizard.test.tsx** âœ…
   - âŒ Eliminado mock de Step3Map
   - âœ… Actualizado flujo de navegaciÃ³n (4 pasos)
   - âœ… Eliminadas verificaciones de `step3-map`

2. **Step3Map.test.tsx** âŒ ELIMINADO
   - Archivo de test eliminado (componente obsoleto)

#### Archivos Eliminados

- âŒ `/frontend/src/components/trips/GPXWizard/Step3Map.tsx`
- âŒ `/frontend/tests/unit/Step3Map.test.tsx`

#### DocumentaciÃ³n

1. **custormer_jorney_gpx.md** âœ…
   - Tabla de pasos actualizada (5 â†’ 4)
   - SecciÃ³n "Optimizaciones Fase 2" aÃ±adida
   - Paso 1: DescripciÃ³n actualizada (mapa preview, sin telemetrÃ­a)
   - Paso 3: Eliminado "Resumen de Ruta"
   - Paso 3 (antes 4): POIs renumerado
   - Paso 4 (antes 5): Review con telemetrÃ­a completa

2. **FASE2_DISEÃ‘O_MOCKUP.md** âœ… (este archivo)
   - AÃ±adida secciÃ³n "IMPLEMENTACIÃ“N FINAL"

### MÃ©tricas de ImplementaciÃ³n

| MÃ©trica | Valor |
|---------|-------|
| **Pasos totales** | 4 (antes 5, reducciÃ³n 20%) |
| **Archivos creados** | 2 (MapPreview.tsx, MapPreview.css) |
| **Archivos eliminados** | 2 (Step3Map.tsx, Step3Map.test.tsx) |
| **Archivos modificados** | 8 (Step1Upload, GPXWizard, Step4Review, tests, docs) |
| **Tiempo de implementaciÃ³n** | ~3 horas (estimado 8-10h, real mÃ¡s rÃ¡pido) |
| **Tests actualizados** | âœ… SÃ­ (GPXWizard.test.tsx) |
| **DocumentaciÃ³n actualizada** | âœ… SÃ­ (customer journey, design mockup) |

### Beneficios Confirmados

1. **UX Mejorada**:
   - Mapa preview inmediato en Paso 1 (orientaciÃ³n espacial)
   - Wizard mÃ¡s corto (4 pasos vs 5)
   - TelemetrÃ­a completa en Review (validaciÃ³n final)
   - Menos clics para completar el wizard

2. **Performance**:
   - Mapa preview sin interacciones (mÃ¡s ligero)
   - Trackpoints simplificados (~200-500 puntos)
   - Skeleton loader para mejor percepciÃ³n de velocidad

3. **Arquitectura**:
   - Componentes reutilizables (MetricGroup/MetricCard en Step4Review)
   - SeparaciÃ³n de responsabilidades (MapPreview vs TripMap)
   - CÃ³digo mÃ¡s limpio (eliminado Step3Map redundante)

### Estado Final

âœ… **Fase 2 - OpciÃ³n C implementada y funcional**

Wizard ahora tiene 4 pasos optimizados:
1. Upload + TÃ­tulo + Mapa Preview
2. Detalles del Viaje
3. POIs (mapa interactivo)
4. Review + TelemetrÃ­a Completa + Publicar
