{
  "info": {
    "name": "ContraVento - GPS Coordinates Testing",
    "description": "Complete test suite for GPS coordinates feature (009-gps-coordinates)\n\nThis collection tests:\n- Valid GPS coordinate storage (6 decimal precision)\n- Backwards compatibility (trips without GPS)\n- Coordinate validation (latitude: -90 to 90, longitude: -180 to 180)\n- Precision rounding (9 decimals → 6 decimals)\n- Mixed locations (some with GPS, some without)\n- Update operations (add GPS to existing trips)\n\nSetup:\n1. Import this collection\n2. Create environment with: base_url, username, password\n3. Run \"0. Authentication\" first to get access token\n4. Run Collection Runner for automated test execution\n\nTotal Tests: 46",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "gps-coordinates-009-v1",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-check token availability",
          "const token = pm.environment.get('access_token');",
          "if (!token) {",
          "    console.log('⚠️ No access token found. Run \"0. Authentication → Login\" first.');",
          "}"
        ]
      }
    }
  ],
  "item": [
    {
      "name": "0. Authentication",
      "item": [
        {
          "name": "Login - Get Access Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Login successful', () => {",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('Access token present', () => {",
                  "    pm.expect(jsonData.data.access_token).to.exist;",
                  "});",
                  "",
                  "if (jsonData.success && jsonData.data.access_token) {",
                  "    pm.environment.set('access_token', jsonData.data.access_token);",
                  "    pm.environment.set('user_id', jsonData.data.user.user_id);",
                  "    pm.environment.set('username', jsonData.data.user.username);",
                  "    console.log('✅ Access token saved to environment');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"login\": \"{{username}}\",\n  \"password\": \"{{password}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            },
            "description": "Login to get access token for authenticated requests.\n\nCredentials are stored in environment variables:\n- username: testuser\n- password: TestPass123!"
          },
          "response": []
        }
      ],
      "description": "Authentication requests to obtain access tokens for API testing"
    },
    {
      "name": "1. Valid GPS Coordinates",
      "item": [
        {
          "name": "Create Trip WITH GPS Coordinates",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Trip created successfully', () => {",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('Trip has ID', () => {",
                  "    pm.expect(jsonData.data.trip_id).to.exist;",
                  "});",
                  "",
                  "pm.test('3 locations created', () => {",
                  "    pm.expect(jsonData.data.locations).to.have.lengthOf(3);",
                  "});",
                  "",
                  "pm.test('Locations have GPS coordinates', () => {",
                  "    jsonData.data.locations.forEach((loc, i) => {",
                  "        pm.expect(loc.latitude).to.be.a('number');",
                  "        pm.expect(loc.longitude).to.be.a('number');",
                  "        pm.expect(loc.sequence).to.equal(i);",
                  "    });",
                  "});",
                  "",
                  "pm.test('Coordinates have max 6 decimals', () => {",
                  "    jsonData.data.locations.forEach(loc => {",
                  "        const latDecimals = (loc.latitude.toString().split('.')[1] || '').length;",
                  "        const lonDecimals = (loc.longitude.toString().split('.')[1] || '').length;",
                  "        pm.expect(latDecimals).to.be.at.most(6);",
                  "        pm.expect(lonDecimals).to.be.at.most(6);",
                  "    });",
                  "});",
                  "",
                  "if (jsonData.success) {",
                  "    pm.environment.set('trip_with_gps_id', jsonData.data.trip_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Ruta Bikepacking Pirineos con GPS\",\n  \"description\": \"Viaje de 5 días por los Pirineos con coordenadas GPS para visualización en mapa. Ruta espectacular cruzando desde España a Francia con paisajes increíbles.\",\n  \"start_date\": \"2024-06-01\",\n  \"end_date\": \"2024-06-05\",\n  \"distance_km\": 320.5,\n  \"difficulty\": \"difficult\",\n  \"locations\": [\n    {\n      \"name\": \"Jaca\",\n      \"country\": \"España\",\n      \"latitude\": 42.570084,\n      \"longitude\": -0.549941\n    },\n    {\n      \"name\": \"Somport\",\n      \"country\": \"España\",\n      \"latitude\": 42.791667,\n      \"longitude\": -0.526944\n    },\n    {\n      \"name\": \"Gavarnie\",\n      \"country\": \"Francia\",\n      \"latitude\": 42.739722,\n      \"longitude\": -0.012778\n    }\n  ],\n  \"tags\": [\"bikepacking\", \"pirineos\", \"internacional\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/trips",
              "host": ["{{base_url}}"],
              "path": ["trips"]
            },
            "description": "Creates a trip with 3 locations that include GPS coordinates.\n\nValidates:\n- Coordinates stored correctly\n- 6 decimal precision enforced\n- Sequence ordering preserved"
          },
          "response": []
        },
        {
          "name": "Get Trip - Verify GPS Stored",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Trip retrieved successfully', () => {",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('Locations include coordinates', () => {",
                  "    pm.expect(jsonData.data.locations).to.exist;",
                  "    jsonData.data.locations.forEach(loc => {",
                  "        pm.expect(loc.latitude).to.be.a('number');",
                  "        pm.expect(loc.longitude).to.be.a('number');",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/trips/{{trip_with_gps_id}}",
              "host": ["{{base_url}}"],
              "path": ["trips", "{{trip_with_gps_id}}"]
            },
            "description": "Retrieves the trip created in previous request to verify GPS coordinates are persisted correctly"
          },
          "response": []
        }
      ],
      "description": "Tests for creating and retrieving trips with valid GPS coordinates"
    },
    {
      "name": "2. Backwards Compatibility",
      "item": [
        {
          "name": "Create Trip WITHOUT GPS Coordinates",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Trip created successfully', () => {",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('Locations have null coordinates', () => {",
                  "    jsonData.data.locations.forEach(loc => {",
                  "        pm.expect(loc.latitude).to.be.null;",
                  "        pm.expect(loc.longitude).to.be.null;",
                  "    });",
                  "});",
                  "",
                  "if (jsonData.success) {",
                  "    pm.environment.set('trip_without_gps_id', jsonData.data.trip_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Camino de Santiago sin GPS\",\n  \"description\": \"Peregrinación en bici desde Roncesvalles a Santiago de Compostela. Viaje espiritual de 10 días por el norte de España siguiendo la ruta histórica.\",\n  \"start_date\": \"2024-07-10\",\n  \"end_date\": \"2024-07-20\",\n  \"distance_km\": 750.0,\n  \"difficulty\": \"moderate\",\n  \"locations\": [\n    {\n      \"name\": \"Roncesvalles\"\n    },\n    {\n      \"name\": \"Pamplona\"\n    },\n    {\n      \"name\": \"Logroño\"\n    },\n    {\n      \"name\": \"Santiago de Compostela\"\n    }\n  ],\n  \"tags\": [\"camino\", \"peregrino\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/trips",
              "host": ["{{base_url}}"],
              "path": ["trips"]
            },
            "description": "Creates a trip without GPS coordinates to test backwards compatibility.\n\nValidates:\n- Trips without GPS work correctly\n- Coordinates are null when not provided\n- No breaking changes to existing functionality"
          },
          "response": []
        }
      ],
      "description": "Tests for backwards compatibility - trips without GPS coordinates should continue to work"
    },
    {
      "name": "3. Validation - Invalid Coordinates",
      "item": [
        {
          "name": "Invalid Latitude > 90",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Status code is 200 (application error)', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Request failed as expected', () => {",
                  "    pm.expect(jsonData.success).to.be.false;",
                  "});",
                  "",
                  "pm.test('Error code is VALIDATION_ERROR', () => {",
                  "    pm.expect(jsonData.error.code).to.equal('VALIDATION_ERROR');",
                  "});",
                  "",
                  "pm.test('Error message mentions latitude', () => {",
                  "    pm.expect(jsonData.error.message.toLowerCase()).to.include('latitud');",
                  "});",
                  "",
                  "pm.test('Field is locations.0.latitude', () => {",
                  "    pm.expect(jsonData.error.field).to.include('latitude');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Test Invalid Latitude\",\n  \"description\": \"Este trip debe fallar porque la latitud está fuera de rango. La latitud debe estar entre -90 y 90 grados según el estándar WGS84.\",\n  \"start_date\": \"2024-06-01\",\n  \"distance_km\": 100.0,\n  \"locations\": [\n    {\n      \"name\": \"Ubicación Inválida\",\n      \"latitude\": 100.0,\n      \"longitude\": -3.703790\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/trips",
              "host": ["{{base_url}}"],
              "path": ["trips"]
            },
            "description": "Tests validation for latitude > 90 (should fail with Spanish error message)"
          },
          "response": []
        },
        {
          "name": "Invalid Latitude < -90",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Request failed as expected', () => {",
                  "    pm.expect(jsonData.success).to.be.false;",
                  "});",
                  "",
                  "pm.test('Error code is VALIDATION_ERROR', () => {",
                  "    pm.expect(jsonData.error.code).to.equal('VALIDATION_ERROR');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Test Invalid Latitude (Negative)\",\n  \"description\": \"Latitud por debajo del rango válido\",\n  \"start_date\": \"2024-06-01\",\n  \"distance_km\": 100.0,\n  \"locations\": [\n    {\n      \"name\": \"Polo Sur Inválido\",\n      \"latitude\": -95.0,\n      \"longitude\": 0.0\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/trips",
              "host": ["{{base_url}}"],
              "path": ["trips"]
            },
            "description": "Tests validation for latitude < -90 (should fail)"
          },
          "response": []
        },
        {
          "name": "Invalid Longitude > 180",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Request failed as expected', () => {",
                  "    pm.expect(jsonData.success).to.be.false;",
                  "});",
                  "",
                  "pm.test('Error message mentions longitude', () => {",
                  "    pm.expect(jsonData.error.message.toLowerCase()).to.include('longitud');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Test Invalid Longitude\",\n  \"description\": \"Longitud por encima del rango válido\",\n  \"start_date\": \"2024-06-01\",\n  \"distance_km\": 100.0,\n  \"locations\": [\n    {\n      \"name\": \"Ubicación Inválida\",\n      \"latitude\": 40.416775,\n      \"longitude\": 200.0\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/trips",
              "host": ["{{base_url}}"],
              "path": ["trips"]
            },
            "description": "Tests validation for longitude > 180 (should fail)"
          },
          "response": []
        },
        {
          "name": "Invalid Longitude < -180",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Request failed as expected', () => {",
                  "    pm.expect(jsonData.success).to.be.false;",
                  "});",
                  "",
                  "pm.test('Error code is VALIDATION_ERROR', () => {",
                  "    pm.expect(jsonData.error.code).to.equal('VALIDATION_ERROR');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Test Invalid Longitude (Negative)\",\n  \"description\": \"Longitud por debajo del rango válido\",\n  \"start_date\": \"2024-06-01\",\n  \"distance_km\": 100.0,\n  \"locations\": [\n    {\n      \"name\": \"Ubicación Inválida\",\n      \"latitude\": 40.416775,\n      \"longitude\": -200.0\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/trips",
              "host": ["{{base_url}}"],
              "path": ["trips"]
            },
            "description": "Tests validation for longitude < -180 (should fail)"
          },
          "response": []
        }
      ],
      "description": "Tests for coordinate validation - invalid latitude/longitude should be rejected with Spanish error messages"
    },
    {
      "name": "4. Precision & Edge Cases",
      "item": [
        {
          "name": "Precision Rounding (9 → 6 decimals)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Trip created successfully', () => {",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('Latitude rounded to 6 decimals', () => {",
                  "    const lat = jsonData.data.locations[0].latitude;",
                  "    const decimals = (lat.toString().split('.')[1] || '').length;",
                  "    pm.expect(decimals).to.be.at.most(6);",
                  "    pm.expect(lat).to.equal(40.123457);",
                  "});",
                  "",
                  "pm.test('Longitude rounded to 6 decimals', () => {",
                  "    const lon = jsonData.data.locations[0].longitude;",
                  "    const decimals = (lon.toString().split('.')[1] || '').length;",
                  "    pm.expect(decimals).to.be.at.most(6);",
                  "    pm.expect(lon).to.equal(-3.987654);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Test Precision Rounding\",\n  \"description\": \"Este trip prueba que las coordenadas se redondean a 6 decimales. La precisión de 6 decimales es aproximadamente 0.11 metros en el ecuador, suficiente para ciclismo.\",\n  \"start_date\": \"2024-06-01\",\n  \"distance_km\": 50.0,\n  \"locations\": [\n    {\n      \"name\": \"Madrid (high precision)\",\n      \"latitude\": 40.123456789,\n      \"longitude\": -3.987654321\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/trips",
              "host": ["{{base_url}}"],
              "path": ["trips"]
            },
            "description": "Tests coordinate precision rounding from 9 decimals to 6 decimals.\n\nInput: 40.123456789, -3.987654321\nExpected: 40.123457, -3.987654"
          },
          "response": []
        },
        {
          "name": "Mixed Locations (Some with GPS, Some without)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Trip created successfully', () => {",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('3 locations created', () => {",
                  "    pm.expect(jsonData.data.locations).to.have.lengthOf(3);",
                  "});",
                  "",
                  "pm.test('Madrid has GPS coordinates', () => {",
                  "    const madrid = jsonData.data.locations[0];",
                  "    pm.expect(madrid.name).to.equal('Madrid');",
                  "    pm.expect(madrid.latitude).to.equal(40.416775);",
                  "    pm.expect(madrid.longitude).to.equal(-3.70379);",
                  "});",
                  "",
                  "pm.test('Toledo has null coordinates', () => {",
                  "    const toledo = jsonData.data.locations[1];",
                  "    pm.expect(toledo.name).to.equal('Toledo');",
                  "    pm.expect(toledo.latitude).to.be.null;",
                  "    pm.expect(toledo.longitude).to.be.null;",
                  "});",
                  "",
                  "pm.test('Cuenca has GPS coordinates', () => {",
                  "    const cuenca = jsonData.data.locations[2];",
                  "    pm.expect(cuenca.name).to.equal('Cuenca');",
                  "    pm.expect(cuenca.latitude).to.equal(40.070392);",
                  "    pm.expect(cuenca.longitude).to.equal(-2.137198);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Ruta Mixta GPS Parcial\",\n  \"description\": \"Este trip tiene algunas ubicaciones con coordenadas GPS y otras sin ellas. El mapa debe mostrar solo los marcadores de ubicaciones con coordenadas válidas.\",\n  \"start_date\": \"2024-06-01\",\n  \"distance_km\": 200.0,\n  \"locations\": [\n    {\n      \"name\": \"Madrid\",\n      \"latitude\": 40.416775,\n      \"longitude\": -3.703790\n    },\n    {\n      \"name\": \"Toledo\"\n    },\n    {\n      \"name\": \"Cuenca\",\n      \"latitude\": 40.070392,\n      \"longitude\": -2.137198\n    }\n  ],\n  \"tags\": [\"ruta mixta\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/trips",
              "host": ["{{base_url}}"],
              "path": ["trips"]
            },
            "description": "Tests mixed locations where some have GPS coordinates and others don't.\n\nValidates:\n- Madrid has coordinates\n- Toledo has null coordinates\n- Cuenca has coordinates"
          },
          "response": []
        },
        {
          "name": "Extreme Valid Coordinates (Boundaries)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Trip created successfully', () => {",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('Extreme coordinates accepted', () => {",
                  "    const locations = jsonData.data.locations;",
                  "    ",
                  "    pm.expect(locations[0].latitude).to.equal(90);",
                  "    pm.expect(locations[0].longitude).to.equal(0);",
                  "    ",
                  "    pm.expect(locations[1].latitude).to.equal(-90);",
                  "    pm.expect(locations[1].longitude).to.equal(0);",
                  "    ",
                  "    pm.expect(locations[2].latitude).to.equal(0);",
                  "    pm.expect(locations[2].longitude).to.equal(180);",
                  "    ",
                  "    pm.expect(locations[3].latitude).to.equal(0);",
                  "    pm.expect(locations[3].longitude).to.equal(-180);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Test Extreme Valid Coordinates\",\n  \"description\": \"Testing boundary values for latitude and longitude\",\n  \"start_date\": \"2024-06-01\",\n  \"distance_km\": 100.0,\n  \"locations\": [\n    {\n      \"name\": \"North Pole\",\n      \"latitude\": 90.0,\n      \"longitude\": 0.0\n    },\n    {\n      \"name\": \"South Pole\",\n      \"latitude\": -90.0,\n      \"longitude\": 0.0\n    },\n    {\n      \"name\": \"International Date Line (East)\",\n      \"latitude\": 0.0,\n      \"longitude\": 180.0\n    },\n    {\n      \"name\": \"International Date Line (West)\",\n      \"latitude\": 0.0,\n      \"longitude\": -180.0\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/trips",
              "host": ["{{base_url}}"],
              "path": ["trips"]
            },
            "description": "Tests extreme valid coordinates at the boundaries:\n- North Pole: 90, 0\n- South Pole: -90, 0\n- Date Line East: 0, 180\n- Date Line West: 0, -180"
          },
          "response": []
        }
      ],
      "description": "Tests for precision rounding and edge cases like mixed locations and extreme valid coordinates"
    },
    {
      "name": "5. Update Operations",
      "item": [
        {
          "name": "Update Trip - Add GPS to Existing Trip",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test('Trip updated successfully', () => {",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('Locations now have GPS coordinates', () => {",
                  "    jsonData.data.locations.forEach(loc => {",
                  "        pm.expect(loc.latitude).to.be.a('number');",
                  "        pm.expect(loc.longitude).to.be.a('number');",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Camino de Santiago CON GPS\",\n  \"description\": \"Ahora con coordenadas GPS añadidas para visualización en mapa\",\n  \"start_date\": \"2024-07-10\",\n  \"end_date\": \"2024-07-20\",\n  \"distance_km\": 750.0,\n  \"difficulty\": \"moderate\",\n  \"locations\": [\n    {\n      \"name\": \"Roncesvalles\",\n      \"latitude\": 43.009722,\n      \"longitude\": -1.319167\n    },\n    {\n      \"name\": \"Pamplona\",\n      \"latitude\": 42.812526,\n      \"longitude\": -1.645775\n    },\n    {\n      \"name\": \"Logroño\",\n      \"latitude\": 42.465937,\n      \"longitude\": -2.445211\n    },\n    {\n      \"name\": \"Santiago de Compostela\",\n      \"latitude\": 42.880555,\n      \"longitude\": -8.544844\n    }\n  ],\n  \"tags\": [\"camino\", \"peregrino\", \"gps\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/trips/{{trip_without_gps_id}}",
              "host": ["{{base_url}}"],
              "path": ["trips", "{{trip_without_gps_id}}"]
            },
            "description": "Updates the trip created without GPS coordinates to add GPS data.\n\nValidates:\n- Update operation works correctly\n- Previous null coordinates replaced with values"
          },
          "response": []
        }
      ],
      "description": "Tests for updating trips to add GPS coordinates to existing trips"
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "username",
      "value": "testuser",
      "type": "string"
    },
    {
      "key": "password",
      "value": "TestPass123!",
      "type": "string"
    }
  ]
}
