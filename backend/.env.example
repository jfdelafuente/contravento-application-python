# =============================================================================
# ContraVento Backend - Environment Variables Configuration
# =============================================================================
# Copy this file to .env and customize values for your environment
# NEVER commit .env files to version control

# =============================================================================
# APPLICATION
# =============================================================================

# Application name (informational)
APP_NAME=ContraVento

# Environment: development, testing, production
# - development: Debug enabled, auto-reload, docs visible
# - testing: In-memory DB, faster tests
# - production: Debug disabled, docs hidden, optimized
APP_ENV=development

# Enable debug mode (auto-reload, verbose errors)
# Set to false in production
DEBUG=true

# =============================================================================
# DATABASE
# =============================================================================

# Database connection URL
# Format: dialect+driver://user:password@host:port/database
#
# Development (SQLite - zero config, file-based):
DATABASE_URL=sqlite+aiosqlite:///./contravento_dev.db
#
# Testing (SQLite - in-memory, fast):
# DATABASE_URL=sqlite+aiosqlite:///:memory:
#
# Production (PostgreSQL - recommended):
# DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/contravento

# =============================================================================
# SECURITY - JWT & AUTHENTICATION
# =============================================================================

# Secret key for JWT signing (REQUIRED, min 32 chars)
# Generate strong key: python -c "import secrets; print(secrets.token_urlsafe(32))"
# CRITICAL: Use different keys for dev/staging/production
# CRITICAL: Never commit real production keys to git
SECRET_KEY=your-secret-key-here-change-in-production-min-32-chars

# JWT signing algorithm (default: HS256)
# Options: HS256 (recommended), HS384, HS512
ALGORITHM=HS256

# Access token expiration (minutes)
# Balance security vs UX - shorter is more secure
# Recommended: 15 minutes
# Range: 1-1440 (1 day max)
ACCESS_TOKEN_EXPIRE_MINUTES=15

# Refresh token expiration (days)
# Used to get new access tokens without re-login
# Recommended: 30 days
# Range: 1-365 (1 year max)
REFRESH_TOKEN_EXPIRE_DAYS=30

# =============================================================================
# SECURITY - PASSWORD HASHING
# =============================================================================

# Bcrypt rounds (work factor) for password hashing
# Higher = more secure but slower
# Recommended: 12 for production (2^12 = 4096 iterations)
# Development: 10 (faster), Production: 12-14 (secure)
# Range: 4-31
BCRYPT_ROUNDS=12

# =============================================================================
# EMAIL / SMTP
# =============================================================================

# SMTP server hostname
# Development: localhost (MailHog on 1025, Mailpit, etc.)
# Production: smtp.gmail.com, smtp.sendgrid.net, ses.amazonaws.com, etc.
SMTP_HOST=localhost

# SMTP server port
# Standard ports:
#   25 (unencrypted) - not recommended
#   587 (STARTTLS) - recommended for production
#   465 (SSL/TLS) - alternative for production
#   1025 (MailHog) - development
SMTP_PORT=1025

# SMTP authentication username
# Leave empty if not required (development with MailHog)
# Gmail: your-email@gmail.com
# SendGrid: "apikey"
SMTP_USER=

# SMTP authentication password
# Leave empty if not required (development)
# Gmail: app-specific password
# SendGrid: your API key
SMTP_PASSWORD=

# Email sender address (From field)
# Used for all outgoing emails (verification, password reset)
SMTP_FROM=noreply@contravento.com

# Enable TLS/SSL encryption
# Development (MailHog): false
# Production: true (highly recommended)
SMTP_TLS=false

# Production Email Examples (uncomment and configure):
#
# SendGrid:
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASSWORD=your-sendgrid-api-key-here
# SMTP_FROM=noreply@contravento.com
# SMTP_TLS=true
#
# Gmail (requires app-specific password):
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-specific-password
# SMTP_FROM=noreply@contravento.com
# SMTP_TLS=true

# =============================================================================
# FILE STORAGE
# =============================================================================

# Base path for file storage (relative to backend/)
# Profile photos: {STORAGE_PATH}/profile_photos/YYYY/MM/
STORAGE_PATH=./storage

# Maximum upload size for profile photos (MB)
# Recommended: 5MB (prevents abuse)
UPLOAD_MAX_SIZE_MB=5

# Profile photo dimensions (square, in pixels)
# Photos resized to this size during upload
# Recommended: 400x400 (balance quality/storage)
PROFILE_PHOTO_SIZE=400

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================

# Allowed origins for CORS requests (comma-separated, NO SPACES)
# Development: Include all local dev servers
# Production: ONLY your production domain(s)
#
# IMPORTANT: Use comma-separated values WITHOUT spaces
# Examples:
#   Development: http://localhost:3000,http://localhost:5173
#   Production: https://contravento.com,https://www.contravento.com
#
# SECURITY: Never use "*" (allow all) in production!
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080

# =============================================================================
# RATE LIMITING
# =============================================================================

# Maximum failed login attempts before account lock
# Prevents brute-force attacks
# Recommended: 5
LOGIN_MAX_ATTEMPTS=5

# Account lock duration after max failed attempts (minutes)
# User must wait this long before trying again
# Recommended: 15 minutes
LOGIN_LOCKOUT_MINUTES=15

# Maximum verification emails per hour (per user)
# Prevents email spam/abuse
# Recommended: 3
VERIFICATION_EMAIL_MAX_PER_HOUR=3

# =============================================================================
# SESSION
# =============================================================================

# Session cookie expiration (days)
# Not currently used (JWT-based auth)
# Future: For remember-me functionality
SESSION_EXPIRE_DAYS=30

# =============================================================================
# LOGGING
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Development: DEBUG (verbose)
# Production: INFO or WARNING (less noise)
LOG_LEVEL=INFO

# Log output format: json, text
# json: Structured logs for production (easier to parse)
# text: Human-readable for development
LOG_FORMAT=json

# =============================================================================
# SERVER
# =============================================================================

# Server bind address
# 0.0.0.0: Listen on all network interfaces (recommended)
# 127.0.0.1: Listen only on localhost (more secure but less flexible)
HOST=0.0.0.0

# Server port
# Default: 8000
# Common alternatives: 80 (HTTP), 443 (HTTPS), 5000, 3000
PORT=8000

# =============================================================================
# PRODUCTION CHECKLIST
# =============================================================================
# Before deploying to production, verify:
#
# [ ] APP_ENV=production
# [ ] DEBUG=false
# [ ] Strong SECRET_KEY (min 32 chars, unique per environment)
# [ ] DATABASE_URL uses PostgreSQL (not SQLite)
# [ ] BCRYPT_ROUNDS=12 or higher
# [ ] Real SMTP server configured
# [ ] CORS_ORIGINS restricted to your domain(s) only
# [ ] SMTP_TLS=true
# [ ] All passwords/keys are production-grade
# [ ] .env file is NOT committed to git (.gitignore)
# [ ] Environment variables set in hosting platform (Heroku, Railway, etc.)
#
# =============================================================================
