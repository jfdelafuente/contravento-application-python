# ============================================================================
# ContraVento - Staging/Pre-Production Environment Variables
# ============================================================================
# Copy to .env.staging and customize for your staging server
# Usage: docker-compose -f docker-compose.yml -f docker-compose.staging.yml --env-file .env.staging up -d
#
# IMPORTANT: Staging should mirror production configuration as closely as possible
# ============================================================================

# =============================================================================
# ENVIRONMENT
# =============================================================================
APP_ENV=production
APP_NAME=ContraVento-Staging
DEBUG=false

# =============================================================================
# DATABASE - PostgreSQL (Staging)
# =============================================================================
POSTGRES_DB=contravento_staging
POSTGRES_USER=contravento_staging
# CRITICAL: Use strong password (min 32 chars, alphanumeric + symbols)
# Generate: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_STAGING_MIN_32_CHARS
POSTGRES_PORT=5432

# Backend connection (internal network)
DATABASE_URL=postgresql+asyncpg://contravento_staging:CHANGE_ME_STRONG_PASSWORD_STAGING_MIN_32_CHARS@postgres:5432/contravento_staging

# =============================================================================
# REDIS - Cache (Staging)
# =============================================================================
# CRITICAL: Use strong password
# Generate: openssl rand -base64 32
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_STAGING_MIN_32_CHARS
REDIS_PORT=6379
REDIS_URL=redis://:CHANGE_ME_REDIS_PASSWORD_STAGING_MIN_32_CHARS@redis:6379/0

# =============================================================================
# SECURITY - JWT (Staging - Production-Grade)
# =============================================================================
# CRITICAL: Use unique strong key different from dev and production
# Generate: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=CHANGE_ME_GENERATE_UNIQUE_SECRET_KEY_MIN_64_CHARS_STAGING

ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=30
BCRYPT_ROUNDS=12

# =============================================================================
# EMAIL - Production SMTP (Staging)
# =============================================================================
# Option 1: SendGrid (recommended)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=CHANGE_ME_SENDGRID_API_KEY
SMTP_FROM=staging@contravento.com
SMTP_TLS=true

# Option 2: AWS SES
# SMTP_HOST=email-smtp.us-east-1.amazonaws.com
# SMTP_PORT=587
# SMTP_USER=CHANGE_ME_AWS_SMTP_USERNAME
# SMTP_PASSWORD=CHANGE_ME_AWS_SMTP_PASSWORD
# SMTP_FROM=staging@contravento.com
# SMTP_TLS=true

# =============================================================================
# CORS - Staging Domain
# =============================================================================
CORS_ORIGINS=https://staging.contravento.com,https://staging-app.contravento.com

# =============================================================================
# FILE STORAGE (Staging)
# =============================================================================
STORAGE_PATH=/app/storage
UPLOAD_MAX_SIZE_MB=10

# =============================================================================
# LOGGING (Staging - Production-like)
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# RATE LIMITING (Staging)
# =============================================================================
LOGIN_MAX_ATTEMPTS=5
LOGIN_LOCKOUT_MINUTES=15
VERIFICATION_EMAIL_MAX_PER_HOUR=3

# =============================================================================
# MONITORING (Staging)
# =============================================================================
GRAFANA_ADMIN_USER=admin
# CRITICAL: Use strong password
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD_STAGING

# =============================================================================
# TRAVEL DIARY - Photo Settings
# =============================================================================
MAX_PHOTOS_PER_TRIP=20
MAX_TAGS_PER_TRIP=10
PHOTO_QUALITY_OPTIMIZED=85
PHOTO_MAX_WIDTH=1200

# =============================================================================
# STAGING CHECKLIST
# =============================================================================
# Before deploying to staging, verify:
#
# [ ] All passwords are production-grade (min 32 chars)
# [ ] SECRET_KEY is unique (different from dev and prod)
# [ ] Real SMTP server configured and tested
# [ ] CORS_ORIGINS restricted to staging domains only
# [ ] SSL certificates configured
# [ ] Monitoring dashboards accessible
# [ ] Backup strategy tested
# [ ] All .env files are NOT in git (.gitignore)
# =============================================================================
