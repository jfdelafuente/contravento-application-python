# ============================================================================
# ContraVento - Local Minimal Development Environment Variables
# ============================================================================
# Lightweight configuration for quick development with only PostgreSQL + Backend
# Copy to .env.local-minimal and customize
# Usage: docker-compose -f docker-compose.yml -f docker-compose.local-minimal.yml --env-file .env.local-minimal up
# ============================================================================

# =============================================================================
# ENVIRONMENT
# =============================================================================
APP_ENV=development
APP_NAME=ContraVento-Local-Minimal
DEBUG=true

# =============================================================================
# BACKEND - Port Configuration
# =============================================================================
# Port exposed on the host machine
BACKEND_PORT=8000

# Port inside the Docker container (usually same as BACKEND_PORT)
BACKEND_INTERNAL_PORT=8000

# Full backend URL (used by frontend and testing scripts)
BACKEND_URL=http://localhost:8000

# =============================================================================
# DATABASE - PostgreSQL (Local)
# =============================================================================
POSTGRES_DB=contravento_local
POSTGRES_USER=contravento_local
POSTGRES_PASSWORD=local_dev_password
POSTGRES_PORT=5432

# Backend connection (from inside Docker container)
# Note: Use 'postgres' (service name) not 'localhost' when running in Docker
DATABASE_URL=postgresql+asyncpg://contravento_local:local_dev_password@postgres:5432/contravento_local

# =============================================================================
# REDIS - NOT USED IN MINIMAL SETUP
# =============================================================================
# Redis is not started in minimal setup to save resources
# If you need Redis, use: ./deploy.sh local (full setup)
REDIS_PASSWORD=not_used_in_minimal
REDIS_PORT=6379
REDIS_URL=redis://:not_used_in_minimal@redis:6379/0

# =============================================================================
# SECURITY - JWT (Local - Weak keys OK for development)
# =============================================================================
# Generate: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=local-minimal-dev-secret-key-change-me-min-32-chars

ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=90
BCRYPT_ROUNDS=4

# =============================================================================
# EMAIL - LOG TO CONSOLE (No MailHog in minimal setup)
# =============================================================================
# Minimal setup doesn't include MailHog
# Emails will be logged to console instead of being "sent"
# To test emails visually, use: ./deploy.sh local (full setup with MailHog)
SMTP_HOST=
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=dev@contravento.com
SMTP_TLS=false

# =============================================================================
# CORS - Local Dev Servers
# =============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080,http://127.0.0.1:3000

# =============================================================================
# FILE STORAGE (Local)
# =============================================================================
STORAGE_PATH=/app/storage
UPLOAD_MAX_SIZE_MB=10

# =============================================================================
# LOGGING (Local - Verbose)
# =============================================================================
LOG_LEVEL=DEBUG
LOG_FORMAT=text

# =============================================================================
# PGADMIN (Available but not exposed by default in minimal setup)
# =============================================================================
# pgAdmin runs in the background but port is not exposed in minimal setup
# To access pgAdmin UI, add port mapping in docker-compose.local-minimal.yml
# NOTE: Use a valid email domain (not .local) to avoid validation errors
PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=admin

# =============================================================================
# NOTES
# =============================================================================
# This minimal setup is perfect for:
#   - Quick development iterations
#   - Working on trips, stats, profiles (non-email features)
#   - Testing database changes
#   - Low resource usage
#
# If you need:
#   - Email testing → use ./deploy.sh local (includes MailHog)
#   - Redis cache → use ./deploy.sh local (includes Redis)
#   - pgAdmin UI → use ./deploy.sh local (includes pgAdmin with UI exposed)
#   - External DB client → use DBeaver, TablePlus, psql, or VS Code extensions
#
# Database connection for external tools:
#   Host: localhost
#   Port: 5432
#   Database: contravento_local
#   Username: contravento_local
#   Password: local_dev_password
# =============================================================================
